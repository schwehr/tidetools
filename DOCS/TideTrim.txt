TideTrim

The program tideTrim takes files of the timestamp height format, as generated by tideConvert, tideFilter, and tideDownsample and trims out records that are not wanted, either because they do not occur in a specified time range, or because they are outliers.
Contents
 [hide] 

    1 The Tools
    2 Algorithm
        2.1 Command Line Options and Arguments
    3 Example

[edit] The Tools

    tideConvert - to generate water level in a standard format from recorded data
    tidePlot - to visually check the result and see any significant data gaps
    tideTrim - to remove outliers
    tideFilter - to smooth the data
    tidePeaks - analysis for offsets and scale
    tideResample - interpolates and downsamples (under development and testing) 

[edit] Algorithm
A demonstration of how the least-squares linear regression is used to find outliers.The green line represents the data. The red line is the data currently evaluated in the data window. The blue dot is the value being statistically analyzed against the other data in the window. The long purple line is the least squares fit linear regression. The dashed lines on either side represent multiples one standard deviation. The little dashed lines show the perpendicular distance of a point to the linear regression. If the threshold (-s) is set to 1.0 standard deviations, the example point (blue dot) would not be considered an outlier.

The outliers are determined by applying a least squares linear regression to a moving window on data (width specified by the -w option). The resulting equation of a line becomes the baseline.

If the distance from the center data point in the data window (the value under scrutiny) is greater than the multiple (default 1.5) of standard deviations from line, the point is considered an outlier and is deleted. (The multiplier can be specified using the -s option.)

This process introduces gaps in the data's time continuity. It is important to fill these and any preexisting gaps by use of the interpolation tool, particularly before applying a low-pass filter (smoothing) or downsampling.


[edit] Command Line Options and Arguments
Short 	Long 	Type 	Default 	Description
-i 	--input-files 	[path/]filename 	None 	

Which files to process. This option may be used more than once. Command line arguements will be interpreted as input file names. If there is no input specified either as an option or as an argument, STDIN will be used for input. (Path is optional.)
-o 	--outputFile 	[path/]filename 	None 	

The file to write the output to. If no file is specified, the output will go to STDOUT.
-b 	--beginTime 	BEGINTIME 	None 	

a string describing a time date. The format is %Y/%m/%d-%H:%M:%S
-e 	--endTime 	ENDTIME 	None 	

a string describing a time date. The format is %Y/%m/%d-%H:%M:%S
-w 	--width 	integer_value 	13 	

The width of the sample window for doing statistics in determining outliers. Default is 13. This should be an odd value so that the center of the window is defined.
-s 	--sigmas 	float_value 	1.5 	

The number of standard deviations outside of which the value is considered an outlier and will be deleted. Default is 1.5
-v 	--verbose 	flag 	False 	

Run with status output to stderr
-f 	--format-time 	One of:
caris
matlab
UNIXepoch
	caris 	time format for output

caris
    YY/mm/dd HH:MM:SS.sss 
matlab
    YY mm dd HH MM SS.sss 
UNIXepoch
    SSSSSSSS.ss 

[edit] Example
The raw data before applying tideTrim
The data after applying tideTrim

    Ben
    My talk
    My preferences
    My watchlist
    My contributions
    Log out

    Page
    Discussion

    Read
    Edit
    View history

Navigation

    Main page
    Community portal
    Current events
    Recent changes
    Random page
    Help

Toolbox

    What links here
    Related changes
    Upload file
    Special pages
    Printable version
    Permanent link

